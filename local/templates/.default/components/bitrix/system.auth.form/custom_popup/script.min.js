(function(a){if(!!a.JSAuthFormPopup){return}a.JSAuthFormPopup=function(b){this.formId=null;this.errorContainerId=null;this.ajaxUrl=null;if(typeof b==="object"){this.formId=b.form_id;this.errorContainerId=b.error_container_id;this.ajaxUrl=b.ajax_url}$($.proxy(this.Init,this))};a.JSAuthFormPopup.prototype.Init=function(){var b=this.GetForm();b.on("submit",$.proxy(this.OnFormSubmit,this))};a.JSAuthFormPopup.prototype.GetForm=function(){if(!this._form){this._form=$("#"+this.formId)}return this._form};a.JSAuthFormPopup.prototype.OnFormSubmit=function(){this.SendAjax();return false};a.JSAuthFormPopup.prototype.SendAjax=function(){$.ajax({url:this.ajaxUrl,method:"POST",dataType:"json",data:this.GetAjaxData(),success:function(b){if(b.error==false){a.location.reload();$(".user-error").hide()}else{$(".user-error").show()}$.proxy(this.OnAjaxSuccess,this)},error:$.proxy(this.OnAjaxError,this)})};a.JSAuthFormPopup.prototype.GetAjaxData=function(){var c={};c.sessid=BX.bitrix_sessid();var b=this.GetForm();c.login=$("input[name=USER_LOGIN]",b).val();c.password=$("input[name=USER_PASSWORD]",b).val();c.remember=$("input[name=USER_REMEMBER]",b).val();return c};a.JSAuthFormPopup.prototype.OnAjaxSuccess=function(c,d,b){if(!!c.error){this.ShowError(c.message)}else{a.location.reload(false)}};a.JSAuthFormPopup.prototype.OnAjaxError=function(b,d,c){this.ShowError("Ошибка запроса")};a.JSAuthFormPopup.prototype.GetErrorContainer=function(){if(!this._errorContainer){this._errorContainer=$("#"+this.errorContainerId)}return this._errorContainer};a.JSAuthFormPopup.prototype.ShowError=function(b){this.GetErrorContainer().text(b)};a.JSAuthFormPopup.prototype.HideError=function(){this.GetErrorContainer().text("")}})(window);$(document).ready(function(){$("p.regLink a").click(function(a){a.preventDefault();$("a.regLink.modal-link").trigger("click")})});